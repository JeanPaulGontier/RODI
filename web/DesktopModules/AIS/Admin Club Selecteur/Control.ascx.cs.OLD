using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using AIS;
using DotNetNuke.Entities.Modules;

public partial class DesktopModules_AIS_Admin_Club_Selecteur : PortalModuleBase
{
    
    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            if (DL_Clubs.SelectedIndex == 0)
            {
                Functions.CurrentClub = null;
                return;
            }
            int cric = 0;
            int.TryParse(DL_Clubs.SelectedValue, out cric);
            Club club = DataMapping.GetClub(cric);
            Functions.CurrentClub = club;
            return;
        }

        List<Club> clubs = DataMapping.ListeClubs(tri: "nom asc");
        DL_Clubs.Items.Clear();
        DL_Clubs.Items.Add(new ListItem("--- Tous ---", "") { Selected = true });
        foreach (Club c in clubs)
            DL_Clubs.Items.Add(new ListItem(c.nom, "" + c.cric));
        if(Functions.CurrentClub!=null)
            DL_Clubs.SelectedValue = "" + Functions.CurrentClub.cric;
    }
    protected void DL_Clubs_SelectedIndexChanged(object sender, EventArgs e)
    {
        
    }
}